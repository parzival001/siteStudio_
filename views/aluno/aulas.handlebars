<h2 class="mt-3">Aulas Disponíveis</h2>

{{#if aulas.length}}
  {{#each aulas}}
    <div class="card mb-3 p-3">
      <h5>Professor: {{this.professor_nome}}</h5>
      <h5>Modalidade: {{this.tipo_nome}}</h5>
      <p>Data: {{this.data_formatada}} - {{this.horario_formatado}}</p>
      <p>Vagas: {{this.vagas}}</p>

      {{#if this.alunos.length}}
        <p><strong>Alunos inscritos:</strong></p>
        <ul>
          {{#each this.alunos}}
            <li>{{this.nome}}</li>
          {{/each}}
        </ul>
      {{else}}
        <p><em>Nenhum aluno inscrito ainda.</em></p>
      {{/if}}

      {{#unless this.ja_inscrito}}
        <form method="POST" action="/aluno/inscrever/{{this.id}}">
          <button type="submit" class="btn btn-success">Inscrever-se</button>
        </form>
      {{else}}
        {{#if this.pode_desmarcar}}
          <form method="POST" action="/aluno/desinscrever/{{this.id}}">
            <button type="submit" class="btn btn-danger">Desinscrever-se</button>
          </form>
          <p class="mt-2 text-muted">Você pode desmarcar essa aula até {{this.tempo_cancelamento}} horas antes.</p>
        {{else}}
          <p class="mt-2 text-warning">Prazo para desmarcar encerrado. Você não pode mais desmarcar esta aula.</p>
        {{/if}}
      {{/unless}}
    </div>
  {{/each}}
{{else}}
  <p class="mt-4">Nenhuma aula disponível no momento.</p>
{{/if}}